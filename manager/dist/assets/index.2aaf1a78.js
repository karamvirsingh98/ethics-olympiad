var ve=Object.defineProperty,ge=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var ie=(e,t,n)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t)=>{for(var n in t||(t={}))oe.call(t,n)&&ie(e,n,t[n]);if(Y)for(var n of Y(t))se.call(t,n)&&ie(e,n,t[n]);return e},R=(e,t)=>ge(e,we(t));var X=(e,t)=>{var n={};for(var d in e)oe.call(e,d)&&t.indexOf(d)<0&&(n[d]=e[d]);if(e!=null&&Y)for(var d of Y(e))t.indexOf(d)<0&&se.call(e,d)&&(n[d]=e[d]);return n};var be=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{f as xe,p as Te,a as Se,j as te,r as I,u as Q,b as P,R as K,c as F,d as fe,e as de,g as Ce,h as Ee,B as Ne}from"./vendor.c7c0f0ba.js";var Rt=be((Ht,J)=>{const ke=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const s of f)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function n(f){const s={};return f.integrity&&(s.integrity=f.integrity),f.referrerpolicy&&(s.referrerPolicy=f.referrerpolicy),f.crossorigin==="use-credentials"?s.credentials="include":f.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(f){if(f.ep)return;f.ep=!0;const s=n(f);fetch(f.href,s)}};ke();(function(t,n,d,f){n[t]=d.call(n);for(var s=0;s<f.length;s++)f[s](n[t]);typeof J!="undefined"&&J.exports?J.exports=n[t]:typeof define=="function"&&define.amd&&define(function(){return n[t]})})("Primus",globalThis||{},function(){var t=function(){function n(d,f,s){function c(y,w){if(!f[y]){if(!d[y]){var p=typeof require=="function"&&require;if(!w&&p)return p(y,!0);if(u)return u(y,!0);var v=new Error("Cannot find module '"+y+"'");throw v.code="MODULE_NOT_FOUND",v}var a=f[y]={exports:{}};d[y][0].call(a.exports,function(r){var m=d[y][1][r];return c(m||r)},a,a.exports,n,d,f,s)}return f[y].exports}for(var u=typeof require=="function"&&require,g=0;g<s.length;g++)c(s[g]);return c}return n}()({1:[function(n,d,f){d.exports=function(c,u){var g=/[, ]+/;u=u||{},c=c||[],typeof c=="string"&&(c=c.split(g));function y(w,p){if(!!u[w]){if(typeof u[w]=="string"&&(u[w]=u[w].split(g)),typeof u[w]=="function")return u[w].call(p);for(var v=0,a,r;v<u[w].length;v++)r=u[w][v],a=typeof r,a==="function"?r.call(p):a==="string"&&typeof p[r]=="function"&&p[r]()}}return function(){var p=this,v=0,a;if(p[c[0]]===null)return!1;for(y("before",p);v<c.length;v++)a=c[v],p[a]&&(typeof p[a].destroy=="function"&&p[a].destroy(),p[a]=null);return p.emit&&p.emit("destroy"),y("after",p),!0}}},{}],2:[function(n,d,f){d.exports=function(){for(var c=this,u,g=0,y=arguments.length,w=new Array(y);g<y;g++)w[g]=arguments[g];return typeof w[w.length-1]!="function"?function(){for(var v=0,a=arguments.length,r=new Array(a);v<a;v++)r[v]=arguments[v];return c.emit.apply(c,w.concat(r))}:(u=w.pop(),function(){for(var v=0,a=arguments.length,r=new Array(a+1);v<a;v++)r[v+1]=arguments[v];return r[0]=function(h,C){if(h)return c.emit("error",h);r=C===void 0?r.slice(1):C===null?[]:C,c.emit.apply(c,w.concat(r))},u.apply(c,r),!0})}},{}],3:[function(n,d,f){var s=Object.prototype.hasOwnProperty,c="~";function u(){}Object.create&&(u.prototype=Object.create(null),new u().__proto__||(c=!1));function g(v,a,r){this.fn=v,this.context=a,this.once=r||!1}function y(v,a,r,m,h){if(typeof r!="function")throw new TypeError("The listener must be a function");var C=new g(r,m||v,h),k=c?c+a:a;return v._events[k]?v._events[k].fn?v._events[k]=[v._events[k],C]:v._events[k].push(C):(v._events[k]=C,v._eventsCount++),v}function w(v,a){--v._eventsCount===0?v._events=new u:delete v._events[a]}function p(){this._events=new u,this._eventsCount=0}p.prototype.eventNames=function(){var a=[],r,m;if(this._eventsCount===0)return a;for(m in r=this._events)s.call(r,m)&&a.push(c?m.slice(1):m);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(r)):a},p.prototype.listeners=function(a){var r=c?c+a:a,m=this._events[r];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,C=m.length,k=new Array(C);h<C;h++)k[h]=m[h].fn;return k},p.prototype.listenerCount=function(a){var r=c?c+a:a,m=this._events[r];return m?m.fn?1:m.length:0},p.prototype.emit=function(a,r,m,h,C,k){var _=c?c+a:a;if(!this._events[_])return!1;var b=this._events[_],i=arguments.length,o,x;if(b.fn){switch(b.once&&this.removeListener(a,b.fn,void 0,!0),i){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,r),!0;case 3:return b.fn.call(b.context,r,m),!0;case 4:return b.fn.call(b.context,r,m,h),!0;case 5:return b.fn.call(b.context,r,m,h,C),!0;case 6:return b.fn.call(b.context,r,m,h,C,k),!0}for(x=1,o=new Array(i-1);x<i;x++)o[x-1]=arguments[x];b.fn.apply(b.context,o)}else{var S=b.length,T;for(x=0;x<S;x++)switch(b[x].once&&this.removeListener(a,b[x].fn,void 0,!0),i){case 1:b[x].fn.call(b[x].context);break;case 2:b[x].fn.call(b[x].context,r);break;case 3:b[x].fn.call(b[x].context,r,m);break;case 4:b[x].fn.call(b[x].context,r,m,h);break;default:if(!o)for(T=1,o=new Array(i-1);T<i;T++)o[T-1]=arguments[T];b[x].fn.apply(b[x].context,o)}}return!0},p.prototype.on=function(a,r,m){return y(this,a,r,m,!1)},p.prototype.once=function(a,r,m){return y(this,a,r,m,!0)},p.prototype.removeListener=function(a,r,m,h){var C=c?c+a:a;if(!this._events[C])return this;if(!r)return w(this,C),this;var k=this._events[C];if(k.fn)k.fn===r&&(!h||k.once)&&(!m||k.context===m)&&w(this,C);else{for(var _=0,b=[],i=k.length;_<i;_++)(k[_].fn!==r||h&&!k[_].once||m&&k[_].context!==m)&&b.push(k[_]);b.length?this._events[C]=b.length===1?b[0]:b:w(this,C)}return this},p.prototype.removeAllListeners=function(a){var r;return a?(r=c?c+a:a,this._events[r]&&w(this,r)):(this._events=new u,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=c,p.EventEmitter=p,typeof d!="undefined"&&(d.exports=p)},{}],4:[function(n,d,f){typeof Object.create=="function"?d.exports=function(c,u){u&&(c.super_=u,c.prototype=Object.create(u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:d.exports=function(c,u){if(u){c.super_=u;var g=function(){};g.prototype=u.prototype,c.prototype=new g,c.prototype.constructor=c}}},{}],5:[function(n,d,f){var s=new RegExp("^((?:\\d+)?\\.?\\d+) *("+["milliseconds?","msecs?","ms","seconds?","secs?","s","minutes?","mins?","m","hours?","hrs?","h","days?","d","weeks?","wks?","w","years?","yrs?","y"].join("|")+")?$","i"),c=1e3,u=c*60,g=u*60,y=g*24,w=y*7,p=y*365;d.exports=function(a){var r=typeof a,m,h;if(r==="number")return a;if(r!=="string"||a==="0"||!a)return 0;if(+a)return+a;if(a.length>1e4||!(h=s.exec(a)))return 0;switch(m=parseFloat(h[1]),h[2].toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return m*p;case"weeks":case"week":case"wks":case"wk":case"w":return m*w;case"days":case"day":case"d":return m*y;case"hours":case"hour":case"hrs":case"hr":case"h":return m*g;case"minutes":case"minute":case"mins":case"min":case"m":return m*u;case"seconds":case"second":case"secs":case"sec":case"s":return m*c;default:return m}}},{}],6:[function(n,d,f){d.exports=function(c){var u=0,g;function y(){return u||(u=1,g=c.apply(this,arguments),c=null),g}return y.displayName=c.displayName||c.name||y.displayName||y.name,y}},{}],7:[function(n,d,f){var s=d.exports={},c,u;function g(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=g}catch{c=g}try{typeof clearTimeout=="function"?u=clearTimeout:u=y}catch{u=y}})();function w(b){if(c===setTimeout)return setTimeout(b,0);if((c===g||!c)&&setTimeout)return c=setTimeout,setTimeout(b,0);try{return c(b,0)}catch{try{return c.call(null,b,0)}catch{return c.call(this,b,0)}}}function p(b){if(u===clearTimeout)return clearTimeout(b);if((u===y||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(b);try{return u(b)}catch{try{return u.call(null,b)}catch{return u.call(this,b)}}}var v=[],a=!1,r,m=-1;function h(){!a||!r||(a=!1,r.length?v=r.concat(v):m=-1,v.length&&C())}function C(){if(!a){var b=w(h);a=!0;for(var i=v.length;i;){for(r=v,v=[];++m<i;)r&&r[m].run();m=-1,i=v.length}r=null,a=!1,p(b)}}s.nextTick=function(b){var i=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)i[o-1]=arguments[o];v.push(new k(b,i)),v.length===1&&!a&&w(C)};function k(b,i){this.fun=b,this.array=i}k.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function _(){}s.on=_,s.addListener=_,s.once=_,s.off=_,s.removeListener=_,s.removeAllListeners=_,s.emit=_,s.prependListener=_,s.prependOnceListener=_,s.listeners=function(b){return[]},s.binding=function(b){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(b){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],8:[function(n,d,f){var s=Object.prototype.hasOwnProperty,c;function u(p){try{return decodeURIComponent(p.replace(/\+/g," "))}catch{return null}}function g(p){try{return encodeURIComponent(p)}catch{return null}}function y(p){for(var v=/([^=?#&]+)=?([^&]*)/g,a={},r;r=v.exec(p);){var m=u(r[1]),h=u(r[2]);m===null||h===null||m in a||(a[m]=h)}return a}function w(p,v){v=v||"";var a=[],r,m;typeof v!="string"&&(v="?");for(m in p)if(s.call(p,m)){if(r=p[m],!r&&(r===null||r===c||isNaN(r))&&(r=""),m=g(m),r=g(r),m===null||r===null)continue;a.push(m+"="+r)}return a.length?v+a.join("&"):""}f.stringify=w,f.parse=y},{}],9:[function(n,d,f){var s=n("eventemitter3"),c=n("millisecond"),u=n("demolish"),g=n("tick-tock"),y=n("one-time");function w(v,a,r){return c(v in r?r[v]:v in a?a[v]:p[v])}function p(v){var a=this;if(!(a instanceof p))return new p(v);v=v||{},a.attempt=null,a._fn=null,a["reconnect timeout"]=w("reconnect timeout",a,v),a.retries=w("retries",a,v),a.factor=w("factor",a,v),a.max=w("max",a,v),a.min=w("min",a,v),a.timers=new g(a)}p.prototype=new s,p.prototype.constructor=p,p["reconnect timeout"]="30 seconds",p.max=1/0,p.min="500 ms",p.retries=10,p.factor=2,p.prototype.reconnect=function(){var a=this;return a.backoff(function(m,h){if(h.duration=+new Date-h.start,m)return a.emit("reconnect failed",m,h);a.emit("reconnected",h)},a.attempt)},p.prototype.backoff=function(a,r){var m=this;return r=r||m.attempt||{},r.backoff?m:(r["reconnect timeout"]=w("reconnect timeout",m,r),r.retries=w("retries",m,r),r.factor=w("factor",m,r),r.max=w("max",m,r),r.min=w("min",m,r),r.start=+r.start||+new Date,r.duration=+r.duration||0,r.attempt=+r.attempt||0,r.attempt===r.retries?(a.call(m,new Error("Unable to recover"),r),m):(r.backoff=!0,r.attempt++,m.attempt=r,r.scheduled=r.attempt!==1?Math.min(Math.round((Math.random()+1)*r.min*Math.pow(r.factor,r.attempt-1)),r.max):r.min,m.timers.setTimeout("reconnect",function(){r.duration=+new Date-r.start,r.backoff=!1,m.timers.clear("reconnect, timeout");var C=m._fn=y(function(_){if(m.reset(),_)return m.backoff(a,r);a.call(m,void 0,r)});m.emit("reconnect",r,C),m.timers.setTimeout("timeout",function(){var _=new Error("Failed to reconnect in a timely manner");r.duration=+new Date-r.start,m.emit("reconnect timeout",_,r),C(_)},r["reconnect timeout"])},r.scheduled),m.emit("reconnect scheduled",r),m))},p.prototype.reconnecting=function(){return!!this.attempt},p.prototype.reconnected=function(a){return this._fn&&this._fn(a),this},p.prototype.reset=function(){return this._fn=this.attempt=null,this.timers.clear("reconnect, timeout"),this},p.prototype.destroy=u("timers attempt _fn"),d.exports=p},{demolish:1,eventemitter3:10,millisecond:5,"one-time":6,"tick-tock":12}],10:[function(n,d,f){var s=typeof Object.create!="function"?"~":!1;function c(g,y,w){this.fn=g,this.context=y,this.once=w||!1}function u(){}u.prototype._events=void 0,u.prototype.listeners=function(y,w){var p=s?s+y:y,v=this._events&&this._events[p];if(w)return!!v;if(!v)return[];if(v.fn)return[v.fn];for(var a=0,r=v.length,m=new Array(r);a<r;a++)m[a]=v[a].fn;return m},u.prototype.emit=function(y,w,p,v,a,r){var m=s?s+y:y;if(!this._events||!this._events[m])return!1;var h=this._events[m],C=arguments.length,k,_;if(typeof h.fn=="function"){switch(h.once&&this.removeListener(y,h.fn,void 0,!0),C){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,w),!0;case 3:return h.fn.call(h.context,w,p),!0;case 4:return h.fn.call(h.context,w,p,v),!0;case 5:return h.fn.call(h.context,w,p,v,a),!0;case 6:return h.fn.call(h.context,w,p,v,a,r),!0}for(_=1,k=new Array(C-1);_<C;_++)k[_-1]=arguments[_];h.fn.apply(h.context,k)}else{var b=h.length,i;for(_=0;_<b;_++)switch(h[_].once&&this.removeListener(y,h[_].fn,void 0,!0),C){case 1:h[_].fn.call(h[_].context);break;case 2:h[_].fn.call(h[_].context,w);break;case 3:h[_].fn.call(h[_].context,w,p);break;default:if(!k)for(i=1,k=new Array(C-1);i<C;i++)k[i-1]=arguments[i];h[_].fn.apply(h[_].context,k)}}return!0},u.prototype.on=function(y,w,p){var v=new c(w,p||this),a=s?s+y:y;return this._events||(this._events=s?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],v]:this._events[a].push(v):this._events[a]=v,this},u.prototype.once=function(y,w,p){var v=new c(w,p||this,!0),a=s?s+y:y;return this._events||(this._events=s?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],v]:this._events[a].push(v):this._events[a]=v,this},u.prototype.removeListener=function(y,w,p,v){var a=s?s+y:y;if(!this._events||!this._events[a])return this;var r=this._events[a],m=[];if(w)if(r.fn)(r.fn!==w||v&&!r.once||p&&r.context!==p)&&m.push(r);else for(var h=0,C=r.length;h<C;h++)(r[h].fn!==w||v&&!r[h].once||p&&r[h].context!==p)&&m.push(r[h]);return m.length?this._events[a]=m.length===1?m[0]:m:delete this._events[a],this},u.prototype.removeAllListeners=function(y){return this._events?(y?delete this._events[s?s+y:y]:this._events=s?{}:Object.create(null),this):this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=s,typeof d!="undefined"&&(d.exports=u)},{}],11:[function(n,d,f){d.exports=function(c,u){if(u=u.split(":")[0],c=+c,!c)return!1;switch(u){case"http":case"ws":return c!==80;case"https":case"wss":return c!==443;case"ftp":return c!==21;case"gopher":return c!==70;case"file":return!1}return c!==0}},{}],12:[function(n,d,f){(function(s,c){(function(){var u=Object.prototype.hasOwnProperty,g=n("millisecond");function y(r,m,h,C){this.start=+new Date,this.duration=h,this.clear=m,this.timer=r,this.fns=[C]}y.prototype.remaining=function(){return this.duration-this.taken()},y.prototype.taken=function(){return+new Date-this.start};function w(r){clearTimeout(r)}function p(r){clearInterval(r)}function v(r){c(r)}function a(r){if(!(this instanceof a))return new a(r);this.timers={},this.context=r||this}a.prototype.tock=function(m,h){var C=this;return function(){if(m in C.timers){var _=C.timers[m],b=_.fns.slice(),i=b.length,o=0;for(h?C.clear(m):C.start=+new Date;o<i;o++)b[o].call(C.context)}}},a.prototype.setTimeout=function(m,h,C){var k=this,_;return k.timers[m]?(k.timers[m].fns.push(h),k):(_=g(C),k.timers[m]=new y(setTimeout(k.tock(m,!0),g(C)),w,_,h),k)},a.prototype.setInterval=function(m,h,C){var k=this,_;return k.timers[m]?(k.timers[m].fns.push(h),k):(_=g(C),k.timers[m]=new y(setInterval(k.tock(m),g(C)),p,_,h),k)},a.prototype.setImmediate=function(m,h){var C=this;return typeof s!="function"?C.setTimeout(m,h,0):C.timers[m]?(C.timers[m].fns.push(h),C):(C.timers[m]=new y(s(C.tock(m,!0)),v,0,h),C)},a.prototype.active=function(m){return m in this.timers},a.prototype.clear=function(){var m=arguments.length?arguments:[],h=this,C,k,_;if(m.length===1&&typeof m[0]=="string"&&(m=m[0].split(/[, ]+/)),!m.length)for(C in h.timers)u.call(h.timers,C)&&m.push(C);for(k=0,_=m.length;k<_;k++)C=h.timers[m[k]],!!C&&(C.clear(C.timer),C.fns=C.timer=C.clear=null,delete h.timers[m[k]]);return h},a.prototype.adjust=function(m,h){var C,k=this,_=g(h),b=k.timers[m];return b&&(C=b.clear===p,b.clear(b.timer),b.start=+new Date,b.duration=_,b.timer=(C?setInterval:setTimeout)(k.tock(m,!C),_)),k},a.prototype.end=a.prototype.destroy=function(){return this.context?(this.clear(),this.context=this.timers=null,!0):!1},a.Timer=y,d.exports=a}).call(this)}).call(this,n("timers").setImmediate,n("timers").clearImmediate)},{millisecond:5,timers:13}],13:[function(n,d,f){(function(s,c){(function(){var u=n("process/browser.js").nextTick,g=Function.prototype.apply,y=Array.prototype.slice,w={},p=0;f.setTimeout=function(){return new v(g.call(setTimeout,window,arguments),clearTimeout)},f.setInterval=function(){return new v(g.call(setInterval,window,arguments),clearInterval)},f.clearTimeout=f.clearInterval=function(a){a.close()};function v(a,r){this._id=a,this._clearFn=r}v.prototype.unref=v.prototype.ref=function(){},v.prototype.close=function(){this._clearFn.call(window,this._id)},f.enroll=function(a,r){clearTimeout(a._idleTimeoutId),a._idleTimeout=r},f.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},f._unrefActive=f.active=function(a){clearTimeout(a._idleTimeoutId);var r=a._idleTimeout;r>=0&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},r))},f.setImmediate=typeof s=="function"?s:function(a){var r=p++,m=arguments.length<2?!1:y.call(arguments,1);return w[r]=!0,u(function(){w[r]&&(m?a.apply(null,m):a.call(null),f.clearImmediate(r))}),r},f.clearImmediate=typeof c=="function"?c:function(a){delete w[a]}}).call(this)}).call(this,n("timers").setImmediate,n("timers").clearImmediate)},{"process/browser.js":7,timers:13}],14:[function(n,d,f){(function(s){(function(){var c=n("requires-port"),u=n("querystringify"),g=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,y=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,w=/^[a-zA-Z]:/,p="[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]",v=new RegExp("^"+p+"+");function a(x){return(x||"").toString().replace(v,"")}var r=[["#","hash"],["?","query"],function(S,T){return C(T.protocol)?S.replace(/\\/g,"/"):S},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],m={hash:1,query:1};function h(x){var S;typeof window!="undefined"?S=window:typeof s!="undefined"?S=s:typeof self!="undefined"?S=self:S={};var T=S.location||{};x=x||T;var N={},O=typeof x,A;if(x.protocol==="blob:")N=new b(unescape(x.pathname),{});else if(O==="string"){N=new b(x,{});for(A in m)delete N[A]}else if(O==="object"){for(A in x)A in m||(N[A]=x[A]);N.slashes===void 0&&(N.slashes=g.test(x.href))}return N}function C(x){return x==="file:"||x==="ftp:"||x==="http:"||x==="https:"||x==="ws:"||x==="wss:"}function k(x,S){x=a(x),S=S||{};var T=y.exec(x),N=T[1]?T[1].toLowerCase():"",O=!!T[2],A=!!T[3],z=0,j;return O?A?(j=T[2]+T[3]+T[4],z=T[2].length+T[3].length):(j=T[2]+T[4],z=T[2].length):A?(j=T[3]+T[4],z=T[3].length):j=T[4],N==="file:"?z>=2&&(j=j.slice(2)):C(N)?j=T[4]:N?O&&(j=j.slice(2)):z>=2&&C(S.protocol)&&(j=T[4]),{protocol:N,slashes:O||C(N),slashesCount:z,rest:j}}function _(x,S){if(x==="")return S;for(var T=(S||"/").split("/").slice(0,-1).concat(x.split("/")),N=T.length,O=T[N-1],A=!1,z=0;N--;)T[N]==="."?T.splice(N,1):T[N]===".."?(T.splice(N,1),z++):z&&(N===0&&(A=!0),T.splice(N,1),z--);return A&&T.unshift(""),(O==="."||O==="..")&&T.push(""),T.join("/")}function b(x,S,T){if(x=a(x),!(this instanceof b))return new b(x,S,T);var N,O,A,z,j,B,W=r.slice(),V=typeof S,L=this,Z=0;for(V!=="object"&&V!=="string"&&(T=S,S=null),T&&typeof T!="function"&&(T=u.parse),S=h(S),O=k(x||"",S),N=!O.protocol&&!O.slashes,L.slashes=O.slashes||N&&S.slashes,L.protocol=O.protocol||S.protocol||"",x=O.rest,(O.protocol==="file:"&&(O.slashesCount!==2||w.test(x))||!O.slashes&&(O.protocol||O.slashesCount<2||!C(L.protocol)))&&(W[3]=[/(.*)/,"pathname"]);Z<W.length;Z++){if(z=W[Z],typeof z=="function"){x=z(x,L);continue}A=z[0],B=z[1],A!==A?L[B]=x:typeof A=="string"?~(j=x.indexOf(A))&&(typeof z[2]=="number"?(L[B]=x.slice(0,j),x=x.slice(j+z[2])):(L[B]=x.slice(j),x=x.slice(0,j))):(j=A.exec(x))&&(L[B]=j[1],x=x.slice(0,j.index)),L[B]=L[B]||N&&z[3]&&S[B]||"",z[4]&&(L[B]=L[B].toLowerCase())}T&&(L.query=T(L.query)),N&&S.slashes&&L.pathname.charAt(0)!=="/"&&(L.pathname!==""||S.pathname!=="")&&(L.pathname=_(L.pathname,S.pathname)),L.pathname.charAt(0)!=="/"&&C(L.protocol)&&(L.pathname="/"+L.pathname),c(L.port,L.protocol)||(L.host=L.hostname,L.port=""),L.username=L.password="",L.auth&&(z=L.auth.split(":"),L.username=z[0]||"",L.password=z[1]||""),L.origin=L.protocol!=="file:"&&C(L.protocol)&&L.host?L.protocol+"//"+L.host:"null",L.href=L.toString()}function i(x,S,T){var N=this;switch(x){case"query":typeof S=="string"&&S.length&&(S=(T||u.parse)(S)),N[x]=S;break;case"port":N[x]=S,c(S,N.protocol)?S&&(N.host=N.hostname+":"+S):(N.host=N.hostname,N[x]="");break;case"hostname":N[x]=S,N.port&&(S+=":"+N.port),N.host=S;break;case"host":N[x]=S,/:\d+$/.test(S)?(S=S.split(":"),N.port=S.pop(),N.hostname=S.join(":")):(N.hostname=S,N.port="");break;case"protocol":N.protocol=S.toLowerCase(),N.slashes=!T;break;case"pathname":case"hash":if(S){var O=x==="pathname"?"/":"#";N[x]=S.charAt(0)!==O?O+S:S}else N[x]=S;break;default:N[x]=S}for(var A=0;A<r.length;A++){var z=r[A];z[4]&&(N[z[1]]=N[z[1]].toLowerCase())}return N.origin=N.protocol!=="file:"&&C(N.protocol)&&N.host?N.protocol+"//"+N.host:"null",N.href=N.toString(),N}function o(x){(!x||typeof x!="function")&&(x=u.stringify);var S,T=this,N=T.protocol;N&&N.charAt(N.length-1)!==":"&&(N+=":");var O=N+(T.slashes||C(T.protocol)?"//":"");return T.username&&(O+=T.username,T.password&&(O+=":"+T.password),O+="@"),O+=T.host+T.pathname,S=typeof T.query=="object"?x(T.query):T.query,S&&(O+=S.charAt(0)!=="?"?"?"+S:S),T.hash&&(O+=T.hash),O}b.prototype={set:i,toString:o},b.extractProtocol=k,b.location=h,b.trimLeft=a,b.qs=u,d.exports=b}).call(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{querystringify:8,"requires-port":11}],15:[function(n,d,f){var s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),c=64,u={},g=0,y=0,w;function p(r){var m="";do m=s[r%c]+m,r=Math.floor(r/c);while(r>0);return m}function v(r){var m=0;for(y=0;y<r.length;y++)m=m*c+u[r.charAt(y)];return m}function a(){var r=p(+new Date);return r!==w?(g=0,w=r):r+"."+p(g++)}for(;y<c;y++)u[s[y]]=y;a.encode=p,a.decode=v,d.exports=a},{}],16:[function(n,d,f){var s=n("eventemitter3"),c=n("tick-tock"),u=n("recovery"),g=n("querystringify"),y=n("inherits"),w=n("demolish"),p=n("yeast"),v=/\u2028/g,a=/\u2029/g;function r(b,i){if(!(b instanceof h)){var o=new Error("Primus#"+i+"'s context should called with a Primus instance");if(typeof b.listeners!="function"||!b.listeners("error").length)throw o;b.emit("error",o)}}var m;try{location.origin?m=location.origin:m=location.protocol+"//"+location.host}catch{m="http://127.0.0.1"}function h(b,i){if(!(this instanceof h))return new h(b,i);if(h.Stream.call(this),typeof this.client!="function")return this.critical(new Error("The client library has not been compiled correctly, see https://github.com/primus/primus#client-library for more details"));if(typeof b=="object"?(i=b,b=i.url||i.uri||m):i=i||{},"ping"in i||"pong"in i)return this.critical(new Error("The `ping` and `pong` options have been removed"));var o=this;i.queueSize="queueSize"in i?i.queueSize:1/0,i.timeout="timeout"in i?i.timeout:1e4,i.reconnect="reconnect"in i?i.reconnect:{},i.pingTimeout="pingTimeout"in i?i.pingTimeout:45e3,i.strategy="strategy"in i?i.strategy:[],i.transport="transport"in i?i.transport:{},o.buffer=[],o.writable=!0,o.readable=!0,o.url=o.parse(b||m),o.readyState=h.CLOSED,o.options=i,o.timers=new c(this),o.socket=null,o.disconnect=!1,o.transport=i.transport,o.transformers={outgoing:[],incoming:[]},o.recovery=new u(i.reconnect),typeof i.strategy=="string"&&(i.strategy=i.strategy.split(/\s?,\s?/g)),i.strategy===!1?i.strategy=[]:i.strategy.length||(i.strategy.push("disconnect","online"),this.authorization||i.strategy.push("timeout")),i.strategy=i.strategy.join(",").toLowerCase(),"websockets"in i&&(o.AVOID_WEBSOCKETS=!i.websockets),"network"in i&&(o.NETWORK_EVENTS=i.network),i.manual||o.timers.setTimeout("open",function(){o.timers.clear("open"),o.open()},0),o.initialise(i)}h.requires=h.require=function(i){if(typeof n=="function")return n(i)};try{h.Stream=h.requires("stream")}catch{}h.Stream||(h.Stream=s),y(h,h.Stream),h.OPENING=1,h.CLOSED=2,h.OPEN=3,h.prototype.AVOID_WEBSOCKETS=!1,h.prototype.NETWORK_EVENTS=!1,h.prototype.online=!0;try{(h.prototype.NETWORK_EVENTS="onLine"in navigator&&(window.addEventListener||document.body.attachEvent))&&(navigator.onLine||(h.prototype.online=!1))}catch{}if(h.prototype.ark={},h.prototype.emits=n("emits"),h.prototype.plugin=function(i){if(r(this,"plugin"),i)return this.ark[i];var o={};for(i in this.ark)o[i]=this.ark[i];return o},h.prototype.reserved=function(i){return/^(incoming|outgoing)::/.test(i)||i in this.reserved.events},h.prototype.reserved.events={"reconnect scheduled":1,"reconnect timeout":1,readyStateChange:1,"reconnect failed":1,reconnected:1,reconnect:1,offline:1,timeout:1,destroy:1,online:1,error:1,close:1,open:1,data:1,end:1},h.prototype.initialise=function(i){var o=this;o.recovery.on("reconnected",o.emits("reconnected")).on("reconnect failed",o.emits("reconnect failed",function(T){o.emit("end"),T()})).on("reconnect timeout",o.emits("reconnect timeout")).on("reconnect scheduled",o.emits("reconnect scheduled")).on("reconnect",o.emits("reconnect",function(T){o.emit("outgoing::reconnect"),T()})),o.on("outgoing::open",function(){var T=o.readyState;o.readyState=h.OPENING,T!==o.readyState&&o.emit("readyStateChange","opening")}),o.on("incoming::open",function(){var T=o.readyState;if(o.recovery.reconnecting()&&o.recovery.reconnected(),o.writable=!0,o.readable=!0,o.online||(o.online=!0,o.emit("online")),o.readyState=h.OPEN,T!==o.readyState&&o.emit("readyStateChange","open"),o.heartbeat(),o.buffer.length){var N=o.buffer.slice(),O=N.length,A=0;for(o.buffer.length=0;A<O;A++)o._write(N[A])}o.emit("open")}),o.on("incoming::ping",function(T){o.online=!0,o.heartbeat(),o.emit("outgoing::pong",T),o._write("primus::pong::"+T)}),o.on("incoming::error",function(T){var N=o.timers.active("connect"),O=T;if(typeof T=="string")O=new Error(T);else if(!(T instanceof Error)&&typeof T=="object"){O=new Error(T.message||T.reason);for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(O[A]=T[A])}if(o.recovery.reconnecting())return o.recovery.reconnected(O);o.listeners("error").length&&o.emit("error",O),N&&(~o.options.strategy.indexOf("timeout")?o.recovery.reconnect():o.end())}),o.on("incoming::data",function(T){o.decoder(T,function(O,A){if(O)return o.listeners("error").length&&o.emit("error",O);o.protocol(A)||o.transforms(o,o,"incoming",A,T)})}),o.on("incoming::end",function(){var T=o.readyState;if(o.disconnect)return o.disconnect=!1,o.end();if(o.readyState=h.CLOSED,T!==o.readyState&&o.emit("readyStateChange","end"),o.timers.active("connect")&&o.end(),T!==h.OPEN)return o.recovery.reconnecting()?o.recovery.reconnect():!1;if(this.writable=!1,this.readable=!1,this.timers.clear(),o.emit("close"),~o.options.strategy.indexOf("disconnect"))return o.recovery.reconnect();o.emit("outgoing::end"),o.emit("end")}),o.client();for(var x in o.ark)o.ark[x].call(o,o,i);return o.NETWORK_EVENTS&&(o.offlineHandler=function(){!o.online||(o.online=!1,o.emit("offline"),o.end(),o.recovery.reset())},o.onlineHandler=function(){o.online||(o.online=!0,o.emit("online"),~o.options.strategy.indexOf("online")&&o.recovery.reconnect())},window.addEventListener?(window.addEventListener("offline",o.offlineHandler,!1),window.addEventListener("online",o.onlineHandler,!1)):document.body.attachEvent&&(document.body.attachEvent("onoffline",o.offlineHandler),document.body.attachEvent("ononline",o.onlineHandler))),o},h.prototype.protocol=function(i){if(typeof i!="string"||i.indexOf("primus::")!==0)return!1;var o=i.indexOf(":",8),x=i.slice(o+2);switch(i.slice(8,o)){case"ping":this.emit("incoming::ping",+x);break;case"server":x==="close"&&(this.disconnect=!0);break;case"id":this.emit("incoming::id",x);break;default:return!1}return!0},h.prototype.transforms=function(i,o,x,S,T){var N={data:S},O=i.transformers[x];return function A(z,j){var B=O[z++];if(!B)return j();if(B.length===1)return B.call(o,N)===!1?void 0:A(z,j);B.call(o,N,function(V,L){if(V)return o.emit("error",V);L!==!1&&A(z,j)})}(0,function(){if(x==="incoming")return o.emit("data",N.data,T);o._write(N.data)}),this},h.prototype.id=function(i){return this.socket&&this.socket.id?i(this.socket.id):(this._write("primus::id::"),this.once("incoming::id",i))},h.prototype.open=function(){return r(this,"open"),!this.recovery.reconnecting()&&this.options.timeout&&this.timeout(),this.emit("outgoing::open"),this},h.prototype.write=function(i){return r(this,"write"),this.transforms(this,this,"outgoing",i),!0},h.prototype._write=function(i){var o=this;return h.OPEN!==o.readyState?(this.buffer.length===this.options.queueSize&&this.buffer.splice(0,1),this.buffer.push(i),!1):(o.encoder(i,function(S,T){if(S)return o.listeners("error").length&&o.emit("error",S);typeof T=="string"&&(~T.indexOf("\u2028")&&(T=T.replace(v,"\\u2028")),~T.indexOf("\u2029")&&(T=T.replace(a,"\\u2029"))),o.emit("outgoing::data",T)}),!0)},h.prototype.heartbeat=function(){return this.options.pingTimeout?(this.timers.clear("heartbeat"),this.timers.setTimeout("heartbeat",function(){!this.online||(this.online=!1,this.emit("offline"),this.emit("incoming::end"))},this.options.pingTimeout),this):this},h.prototype.timeout=function(){var i=this;function o(){i.removeListener("error",o).removeListener("open",o).removeListener("end",o).timers.clear("connect")}return i.timers.setTimeout("connect",function(){o(),!(i.readyState===h.OPEN||i.recovery.reconnecting())&&(i.emit("timeout"),~i.options.strategy.indexOf("timeout")?i.recovery.reconnect():i.end())},i.options.timeout),i.on("error",o).on("open",o).on("end",o)},h.prototype.end=function(i){if(r(this,"end"),this.readyState===h.CLOSED&&!this.timers.active("connect")&&!this.timers.active("open"))return this.recovery.reconnecting()&&(this.recovery.reset(),this.emit("end")),this;i!==void 0&&this.write(i),this.writable=!1,this.readable=!1;var o=this.readyState;return this.readyState=h.CLOSED,o!==this.readyState&&this.emit("readyStateChange","end"),this.timers.clear(),this.emit("outgoing::end"),this.emit("close"),this.emit("end"),this},h.prototype.destroy=w("url timers options recovery socket transport transformers",{before:"end",after:["removeAllListeners",function(){!this.NETWORK_EVENTS||(window.addEventListener?(window.removeEventListener("offline",this.offlineHandler),window.removeEventListener("online",this.onlineHandler)):document.body.attachEvent&&(document.body.detachEvent("onoffline",this.offlineHandler),document.body.detachEvent("ononline",this.onlineHandler)))}]}),h.prototype.clone=function(i){return this.merge({},i)},h.prototype.merge=function(i){for(var o=1,x,S;o<arguments.length;o++){S=arguments[o];for(x in S)Object.prototype.hasOwnProperty.call(S,x)&&(i[x]=S[x])}return i},h.prototype.parse=n("url-parse"),h.prototype.querystring=g.parse,h.prototype.querystringify=g.stringify,h.prototype.uri=function(i){var o=this.url,x=[],S=!1;i.query&&(S=!0),i=i||{},i.protocol="protocol"in i?i.protocol:"http:",i.query=o.query&&S?o.query.slice(1):!1,i.secure="secure"in i?i.secure:o.protocol==="https:"||o.protocol==="wss:",i.auth="auth"in i?i.auth:o.auth,i.pathname="pathname"in i?i.pathname:this.pathname,i.port="port"in i?+i.port:+o.port||(i.secure?443:80);var T=this.querystring(i.query||"");return T._primuscb=p(),i.query=this.querystringify(T),this.emit("outgoing::url",i),x.push(i.secure?i.protocol.replace(":","s:"):i.protocol,""),x.push(i.auth?i.auth+"@"+o.host:o.host),i.pathname&&x.push(i.pathname.slice(1)),S?x[x.length-1]+="?"+i.query:delete i.query,i.object?i:x.join("/")},h.prototype.transform=function(i,o){return r(this,"transform"),i in this.transformers?(this.transformers[i].push(o),this):this.critical(new Error("Invalid transformer type"))},h.prototype.critical=function(i){if(this.emit("error",i))return this;throw i},h.connect=function(i,o){return new h(i,o)},h.EventEmitter=s,h.prototype.client=function(){var i=this,o,x=function(){if(typeof WebSocket!="undefined")return WebSocket;if(typeof MozWebSocket!="undefined")return MozWebSocket;try{return h.requires("ws")}catch{}}();if(!x)return i.critical(new Error("Missing required `ws` module. Please run `npm install --save ws`"));i.on("outgoing::open",function(){i.emit("outgoing::end");try{var T={protocol:i.url.protocol==="ws+unix:"?"ws+unix:":"ws:",query:!0};x.length===3?(T.protocol==="ws+unix:"&&(T.pathname="/"+i.url.hostname+i.url.pathname+":"+i.pathname),i.socket=o=new x(i.uri(T),[],i.transport)):(i.socket=o=new x(i.uri(T)),o.binaryType="arraybuffer")}catch(N){return i.emit("error",N)}o.onopen=i.emits("incoming::open"),o.onerror=i.emits("incoming::error"),o.onclose=i.emits("incoming::end"),o.onmessage=i.emits("incoming::data",function(O,A){O(void 0,A.data)})}),i.on("outgoing::data",function(T){if(!(!o||o.readyState!==x.OPEN))try{o.send(T)}catch(N){i.emit("incoming::error",N)}}),i.on("outgoing::reconnect",function(){i.emit("outgoing::open")}),i.on("outgoing::end",function(){!o||(o.onerror=o.onopen=o.onclose=o.onmessage=function(){},o.close(),o=null)})},h.prototype.authorization=!1,h.prototype.pathname="/primus",h.prototype.encoder=function(i,o){var x;try{i=JSON.stringify(i)}catch(S){x=S}o(x,i)},h.prototype.decoder=function(i,o){var x;if(typeof i!="string")return o(x,i);try{i=JSON.parse(i)}catch(S){x=S}o(x,i)},h.prototype.version="8.0.5",typeof document!="undefined"&&typeof navigator!="undefined"){document.addEventListener&&document.addEventListener("keydown",function(i){i.keyCode!==27||!i.preventDefault||i.preventDefault()},!1);var C=(navigator.userAgent||"").toLowerCase(),k=C.match(/.+(?:rv|it|ra|ie)[/: ](\d+)\.(\d+)(?:\.(\d+))?/)||[],_=+[k[1],k[2]].join(".");!~C.indexOf("chrome")&&~C.indexOf("safari")&&_<534.54&&(h.prototype.AVOID_WEBSOCKETS=!0)}d.exports=h},{demolish:1,emits:2,eventemitter3:3,inherits:4,querystringify:8,recovery:9,"tick-tock":12,"url-parse":14,yeast:15}]},{},[16])(16);return t.prototype.ark.emitter=function(){},t},[function(e){(function(t,n){function d(s,c){var u=s.prototype.initialise;s.prototype.initialise=function(){this.emitter||(this.emitter=new c(this)),this.__initialise||u.apply(this,arguments)},s.readable?s.prototype.send||s.readable("send",g):s.prototype.send=g;function g(y,w,p){return/^(newListener|removeListener)/.test(y)?this:(this.emitter.send.apply(this.emitter,arguments),this)}}function f(){var s=Object.prototype.toString,c=Array.prototype.slice,u=Array.isArray||function(p){return s.call(p)==="[object Array]"},g={EVENT:0,ACK:1};function y(w){if(!(this instanceof y))return new y(w);this.ids=1,this.acks={},this.conn=w,this.conn&&this.bind()}return y.prototype.bind=function(){var p=this;return this.conn.on("data",function(a){p.ondata.call(p,a)}),this},y.prototype.ondata=function(p){if(!u(p.data)||p.id&&typeof p.id!="number")return this;switch(p.type){case g.EVENT:this.onevent(p);break;case g.ACK:this.onack(p)}return this},y.prototype.send=function(){var p=c.call(arguments);return this.conn.write(this.packet(p)),this},y.prototype.packet=function(p){var v={type:g.EVENT,data:p};if(typeof p[p.length-1]=="function"){var a=this.ids++;this.acks[a]=p.pop(),v.id=a}return v},y.prototype.onevent=function(p){var v=p.data;return this.conn.reserved(v[0])?this:(p.id&&v.push(this.ack(p.id)),this.conn.emit.apply(this.conn,v),this)},y.prototype.ack=function(p){var v=this.conn,a=!1;return function(){a||(a=!0,v.write({id:p,type:g.ACK,data:c.call(arguments)}))}},y.prototype.onack=function(p){var v=this.acks[p.id];return typeof v=="function"&&(v.apply(this,p.data),delete this.acks[p.id]),this},y.packets=g,y}n!==t&&(t.$=t.$||{},t.$.emitter={},t.$.emitter.spark=d,t.$.emitter.emitter=f,d(t,f()))})(e)}]);function G(e,t="_id"){return Object.fromEntries(e.map(n=>[n[t],n]))}function me(e,t){return Object.fromEntries(Object.entries(e).filter(n=>!_e(n[0],t)))}function _e(e,t){return t.includes(e)}function Oe(e){const{Primus:t}=window,n=new t(e),d=xe();return d.configure(Te(n)),d.configure(Se()),d}const l=te.exports.jsx,E=te.exports.jsxs,ee=te.exports.Fragment;function H({id:e,className:t,placeholder:n,type:d,value:f,defaultValue:s,autofocus:c,style:u,dontBlurOnEnter:g,onChange:y,onConfirm:w}){return l("input",{id:e,className:t,style:u,placeholder:n,type:d,value:f,defaultValue:s,autoFocus:c,onChange:p=>y&&y(p.currentTarget.value),onBlur:p=>w&&!g&&w(p.currentTarget.value),onKeyDown:p=>p.key==="Enter"&&p.currentTarget.blur()})}function Le({login:e}){const[t,n]=I.exports.useState({email:"",password:""}),[d,f]=I.exports.useState(!1);return E("div",{className:"auth-window",children:[l("div",{style:{fontSize:"2rem",borderBottom:"solid 1px"},children:"Ethics Olympiad Manager"}),l(H,{placeholder:"email",value:t.email,onChange:s=>n(R(q({},t),{email:s}))}),E("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",width:"100%",gap:"1rem"},children:[l(H,{type:d?void 0:"password",placeholder:"password",value:t.password,onChange:s=>n(R(q({},t),{password:s})),onConfirm:()=>e(t)}),l("button",{className:d?"blue":"orange",style:{fontSize:"0.8rem",placeSelf:"end",width:"3rem"},onClick:()=>f(!d),children:d?"Hide":"Show"})]}),l("button",{className:"green",style:{width:"100%"},onClick:()=>e(t),children:"Login"})]})}function Ae({createAccount:e}){const[t,n]=I.exports.useState({name:"",email:"",password:""}),[d,f]=I.exports.useState(!1),{inviteKey:s}=Q(),c=P();return E("div",{className:"auth-window",children:[l("div",{style:{fontSize:"2rem",borderBottom:"solid 1px"},children:"Ethics Olympiad Manager"}),l(H,{placeholder:"name",value:t.name,onChange:u=>n(R(q({},t),{name:u}))}),l(H,{placeholder:"email",value:t.email,onChange:u=>n(R(q({},t),{email:u}))}),E("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",width:"100%",gap:"1rem"},children:[l(H,{type:d?void 0:"password",placeholder:"password",value:t.password,onChange:u=>n(R(q({},t),{password:u}))}),l("button",{className:d?"blue":"orange",style:{fontSize:"0.8rem",placeSelf:"end",width:"3rem"},onClick:()=>f(!d),children:d?"Hide":"Show"})]}),l("button",{className:"green",style:{width:"100%"},onClick:async()=>{await e(t,s),c("/")},children:"Create Account"})]})}function Ie({login:e,createAccount:t}){return l(I.exports.Fragment,{children:E(K,{children:[l(F,{path:"/",element:l(Le,{login:e})}),l(F,{path:"/signup/:inviteKey",element:l(Ae,{createAccount:t})})]})})}function ze({user:e,isAuth:t,notAuth:n}){return e?E(I.exports.Fragment,{children:[" ",t," "]}):e===!1?E(I.exports.Fragment,{children:[" ",n," "]}):e===void 0?l("div",{style:{placeSelf:"center",fontSize:"2rem"},children:"Loading..."}):null}function qe({dark:e}){return l("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 500.345 500.345",enableBackground:"new 0 0 500.345 500.345",width:"1.5rem",height:"1.5rem",className:"dark-icon",children:E("g",{children:[l("path",{fill:e?"#F0E2A3":"#262726",d:"M250.197,128.078c-57.517,0-104.093,46.626-104.093,104.108c0,27.267,10.493,58.861,27.658,84.518 c18.556,27.774,31.28,59.401,36.94,92.321l2.653,15.51h73.648l2.668-15.576c5.727-33.169,18.237-64.234,36.941-92.225 c17.164-25.672,27.672-57.268,27.672-84.549C354.285,174.704,307.693,128.078,250.197,128.078z"}),l("path",{fill:e?"#F8F4E3":"#262726",d:"M213.865,464.032c0,20.049,16.264,36.313,36.313,36.313c20.054,0,36.303-16.248,36.303-36.297v-15.164h-72.615V464.032z"})]})})}function De({dark:e,user:t,toggleDark:n,logout:d}){const[f,s]=I.exports.useState(0),c=P();return I.exports.useEffect(()=>{const u=window.location.pathname;s(ae.findIndex(g=>g.toLowerCase()===u.slice(1,u.length)))},[]),E("div",{className:"topbar grey-flat",style:{width:"100%"},children:[l("div",{style:{fontSize:"2rem"},children:"Ethics Olympiad Manager"}),E("div",{className:"topbar-buttons",children:[ae.map((u,g)=>l(ce,{text:u,active:g===f,onClick:()=>{s(g),c(u==="Home"?"/":`/${u.toLowerCase()}`)}},u+g)),t.admin&&l(ce,{text:"Users",active:f===3,onClick:()=>{s(3),c("/users")}}),l("button",{onClick:n,children:l(qe,{dark:e})}),l("button",{className:"red",onClick:()=>{d(),c("/")},children:"Logout"})]})]})}const ae=["Home","Events","Cases"];function ce({text:e,active:t,onClick:n}){return l("button",{style:{borderRadius:0},className:`topbar-button ${t?"active":""}`,onClick:n,children:e})}function je(e,t){return{owner:e,templateTitle:"",heats:[],timers:[3,5,1,3,1,3,7],level:t}}function Re(e){return{templateID:e,eventTitle:"",teams:[]}}function Be(e,t,n){return{owner:e._id,title:"New Case",question:"",isVideo:t,level:n,isOfficial:!!e.admin}}function Fe({array:e,map:t}){return l(I.exports.Fragment,{children:e.map(t)})}function M({condition:e,showTrue:t,showFalse:n}){return e?E(I.exports.Fragment,{children:[" ",t," "]}):E(I.exports.Fragment,{children:[" ",n," "]})}function $({value:e,editing:t,fontSize:n="1rem",placeholder:d,autofocus:f,id:s,style:c,onEdit:u}){return l(M,{condition:t,showTrue:l(H,{id:s,autofocus:f,value:e,onChange:u,placeholder:d,style:q({fontSize:n},c)}),showFalse:l("div",{style:{fontSize:n,borderBottom:"solid 0.25rem transparent"},children:e})})}function He(e,t,n){return{saveEdits:(d,f)=>async()=>{const s=await D.service("/api/cases").update(d,f);e(s._id,s),n(!1)},cancelEdits:d=>async()=>{e(d,await D.service("/api/cases").get(d)),n(!1)},deleteCase:d=>async()=>{await D.service("api/cases").remove(d),t(d)}}}function ne({editing:e,extraText:t,toggleEditing:n,onDelete:d,onSave:f,onCancel:s,children:c}){return E("div",{style:{display:"grid",gridAutoFlow:"column",placeSelf:"center end",gap:"1rem"},children:[l("button",{className:e?"green":"blue",onClick:e?f:n,children:e?`Save ${t}`:`Edit ${t}`}),l("button",{className:e?"orange":"red",onClick:e?s:d,children:e?"Cancel Changes":`Delete ${t}`}),c]})}function Ue({editing:e,title:t,onRename:n,toggleEditing:d,onDelete:f,onSave:s,onCancel:c}){return E("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"2rem"},children:[l($,{autofocus:!0,placeholder:"New Case",fontSize:"1.25rem",value:t,editing:e,onEdit:n}),l(ne,{editing:e,toggleEditing:d,onDelete:f,onSave:s,onCancel:c,extraText:"Case"})]})}function Pe({value:e,onChange:t}){return l("textarea",{onChange:n=>t(n.target.value),style:{whiteSpace:"pre-line"},value:e})}function $e({_case:e,setOne:t,setOneField:n,removeOne:d}){const{_id:f,title:s,question:c,isVideo:u,videoURL:g,bodyText:y}=e,[w,p]=I.exports.useState(!1),{saveEdits:v,cancelEdits:a,deleteCase:r}=He(t,d,p);return E("div",{style:{display:"grid",gap:"1rem",padding:"1rem",borderRadius:"0.25rem"},className:"grey",children:[l(Ue,{title:s,editing:w,toggleEditing:()=>p(!0),onRename:m=>n(f,"title",m),onSave:v(f,e),onCancel:a(f),onDelete:r(f)}),w&&E(I.exports.Fragment,{children:[E("div",{style:{display:"flex",fontSize:"1rem",gap:"1rem"},children:[l("div",{style:{borderBottom:"solid 0.25rem transparent"},children:"Question:"}),l($,{placeholder:"Question",value:c,editing:w,onEdit:m=>n(f,"question",m)})]}),E("div",{style:{display:"flex",fontSize:"1rem",gap:"1rem",width:"100%"},children:[l("div",{style:{borderBottom:"solid 0.25rem transparent",whiteSpace:"nowrap"},children:u?"Video URL: ":"Case Body: "}),l(M,{condition:u,showTrue:l($,{placeholder:"Video URL",editing:w,value:g,onEdit:()=>{}}),showFalse:l(Pe,{value:y,onChange:m=>n(f,"bodyText",m)})})]})]})]})}function Me({_case:e}){const[t,n]=I.exports.useState(!1),{title:d,question:f,isVideo:s,videoURL:c,bodyText:u}=e;return E("div",{style:{display:"grid",gap:"1rem",padding:"1rem",borderRadius:"0.25rem"},className:"grey-flat",children:[E("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l("div",{style:{fontSize:"1.25rem",borderBottom:"solid 0.25rem transparent"},children:d}),l("button",{className:t?"orange":"blue",onClick:()=>n(!t),children:t?"Hide Details":"Show Details"})]}),t&&E(ee,{children:[E("div",{style:{display:"flex",fontSize:"1rem",gap:"1rem"},children:[l("div",{style:{borderBottom:"solid 0.25rem transparent"},children:"Question:"}),l("div",{style:{fontSize:"1.25rem",borderBottom:"solid 0.25rem transparent"},children:f})]}),E("div",{style:{display:"flex",fontSize:"1rem",gap:"1rem",width:"100%"},children:[l("div",{style:{borderBottom:"solid 0.25rem transparent",whiteSpace:"nowrap"},children:s?"Video URL: ":"Case Body: "}),l(M,{condition:s,showTrue:l("div",{style:{fontSize:"1.25rem",borderBottom:"solid 0.25rem transparent"},children:c}),showFalse:E("div",{style:{whiteSpace:"pre-wrap",marginRight:"2rem"},children:[" ",u," "]})})]})]})]})}function le({user:e,title:t,cases:n,sortCondition:d,functions:f,onNewClick:s}){const{setOne:c,setOneField:u,removeOne:g}=f;return E("div",{style:{display:"grid",gap:"1rem",gridTemplateRows:"auto 100%",maxHeight:"75vh"},children:[E("div",{style:{display:"flex",alignItems:"start",justifyContent:"space-between",paddingBottom:"0.25rem",borderBottom:"solid 0.15rem"},children:[l("div",{style:{fontSize:"1.5rem"},children:t}),l("button",{className:"green",onClick:s,children:"New Case"})]}),l("div",{style:{display:"grid",gap:"1rem",height:"fit-content"},children:n&&l(Fe,{array:Object.keys(n).filter(d),map:y=>!e.admin&&n[y].isOfficial?l(Me,{_case:n[y]}):l($e,{_case:n[y],setOne:c,setOneField:u,removeOne:g},y)})})]})}function U({vertical:e}){return l("div",{style:{border:"solid 1px",borderRadius:"100%",opacity:.25,width:e?void 0:"100%",height:e?"100%%":void 0}})}function Ve({user:e}){return E(K,{children:[l(F,{path:"/",element:l(Ke,{user:e})}),l(F,{path:"/:caseLevel",element:l(We,{user:e})})]})}function Ke({user:e}){const t=P(),n=e.admin?["junior","middle","senior","tertiary"]:e.permissions;function d(f){return f[0].toUpperCase()+f.slice(1)}return l("div",{style:{display:"grid",placeItems:"center",height:"100%"},children:l("div",{style:{display:"flex",gap:"2rem",alignItems:"center",justifyContent:"center",flexWrap:"wrap"},children:n==null?void 0:n.map(f=>E("button",{onClick:()=>t(`./${f}`),className:"blue",style:{fontSize:"1.5rem",padding:"0.5rem 2rem"},children:[d(f)," Level Cases"]},f))})})}function We({user:e}){const{caseLevel:t}=Q(),[n,d]=I.exports.useState({}),[f,s]=ye(e);I.exports.useEffect(()=>{e.admin||D.service("api/cases").find({query:{isOfficial:!0,level:t}}).then(w=>d(G(w,"_id")))},[]);const c=w=>async()=>{const p=await D.service("/api/cases").create(Be(e,w,t));s.setOne(p._id,p)};function u(w){return w[0].toUpperCase()+w.slice(1)}function g(w,p){return`${u(w)} School Cases`}const y=e.admin?f:q(q({},f),n);return E("div",{style:{display:"grid",gap:"1rem",gridTemplateRows:"auto auto 1fr"},children:[l("div",{style:{display:" grid",fontSize:"2rem",textAlign:"center"},children:g(t)}),l(U,{}),E("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"2rem",marginTop:"1rem",overflow:"hidden"},children:[l("div",{style:{overflowY:"auto"},children:l(le,{user:e,title:"Video Cases",cases:y,sortCondition:w=>y&&y[w].isVideo&&y[w].level===t,functions:s,onNewClick:c(!0)})}),l(U,{vertical:!0}),l("div",{style:{overflowY:"auto"},children:l(le,{user:e,title:"Text Cases",cases:y,sortCondition:w=>y&&!y[w].isVideo&&y[w].level===t,functions:s,onNewClick:c(!1)})})]})]})}function he({active:e,onClick:t}){return l("div",{style:{position:"relative",width:"2rem",height:"1rem",borderRadius:"1rem",backgroundColor:e?"green":"red"},onClick:t,children:l("div",{style:{position:"absolute",left:0,transform:e?"translateX(100%)":"translateX(0%)",transition:"transform .2s",borderRadius:"100%",width:"1rem",height:"1rem",backgroundColor:"white"}})})}function Ye({user:e,setOneField:t}){const n=["junior","middle","senior","tertiary"];function d(c){return c[0].toUpperCase()+c.slice(1)}function f(c,u){return`${d(c)} School Cases`}const s=c=>async()=>{var u;if((u=e.permissions)==null?void 0:u.includes(c)){const g=e.permissions.filter(y=>y!==c);await D.service("api/users").update(e._id,R(q({},e),{permissions:g})),t(e._id,"permissions",g)}else{const g=e.permissions?[...e.permissions,c]:[c];await D.service("api/users").update(e._id,R(q({},e),{permissions:g})),t(e._id,"permissions",g)}};return l("div",{style:{display:"grid",gap:"1rem"},children:n.map(c=>{var u;return E("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[f(c),l(he,{active:!!((u=e.permissions)==null?void 0:u.includes(c)),onClick:s(c)})]})})})}function Je({user:e,removeOne:t,setOneField:n}){const[d,f]=I.exports.useState(!1),s=()=>{d?(D.service("api/users").remove(e._id),t(e._id),f(!1)):f(!0)},c=async()=>{await D.service("api/users").update(e._id,R(q({},e),{admin:!e.admin})),n(e._id,"admin",!e.admin)};return E("div",{style:{display:"grid",gap:"1rem"},children:[E("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l("div",{style:{fontSize:"2rem"},children:e.name}),l("button",{className:"red",style:{fontSize:"0.8rem"},onClick:s,children:d?"Confirm":"Delete"})]}),E("div",{style:{display:"flex",gap:"2rem"},children:["Has Admin Privelidges",l(he,{active:e.admin,onClick:c})]}),l("div",{children:`Email: ${e.email}`}),l("div",{children:e.createdAt&&`Member Since: ${Qe(new Date(e.createdAt))}`})]})}function Qe(e){return`${e.getDate()} / ${e.getMonth()+1} / ${e.getFullYear()}`}function Ge({user:e,functions:t}){const{setOne:n,setOneField:d,removeOne:f}=t;return E("div",{className:"grey-flat user",children:[l(Je,{user:e,removeOne:f,setOneField:d}),l(U,{vertical:!0}),l(M,{condition:!!e.admin,showTrue:l("div",{style:{display:"grid",placeItems:"center"},children:"This user does not require permissions."}),showFalse:l(Ye,{user:e,setOneField:d})})]})}function Ze(e,t){const n=de({});return d=>{const[f,s]=fe(n);return I.exports.useEffect(()=>{D.service(`api/${e}`).find({query:{owner:d._id}}).then(y=>{s(G(y,"_id"))})},[]),[f,{set:s,setOne:(y,w)=>{s(R(q({},f),{[y]:w}))},setOneField:(y,w,p)=>{s(R(q({},f),{[y]:R(q({},f[y]),{[w]:p})}))},removeOne:y=>{s(me(f,[y]))}}]}}function re(e,t){const[n,d]=I.exports.useState();return I.exports.useEffect(()=>{D.service(`api/${e}`).find(t).then(f=>{d(G(f,"_id"))})},[]),[n,{set:d,setOne:(f,s)=>{d(R(q({},n),{[f]:s}))},setOneField:(f,s,c)=>{d(R(q({},n),{[f]:R(q({},n[f]),{[s]:c})}))},removeOne:f=>{d(me(n,[f]))}}]}function Xe({invite:e,onDelete:t}){return E("div",{className:"invite grey-flat",children:[E("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l("div",{style:{fontSize:"1.25rem"},children:e.name}),l("div",{style:{opacity:.8},children:e.email}),l("button",{className:"red",style:{fontSize:"0.8rem"},children:"Delete"})]}),E("div",{children:["Invite URL: http://localhost:3000/signup/",e.key]})]})}function et({onConfirmInvite:e}){const[t,n]=I.exports.useState(!1),[d,f]=I.exports.useState({name:"",email:""});async function s(){const u=await D.service("api/invite").create(d);e(u),f({name:"",email:""})}function c(){f({name:"",email:""})}return E("div",{style:{display:"grid",gap:"1rem",paddingBottom:"1rem",borderBottom:"solid 2px"},children:[E("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l("div",{style:{fontSize:"1.5rem",borderBottom:"solid 1px transparent"},children:"Invites"}),l(tt,{show:t,toggle:()=>n(!t),confirm:s,cancel:c})]}),t&&l(nt,{setName:u=>f(R(q({},d),{name:u})),setEmail:u=>f(R(q({},d),{email:u}))})]})}function tt({show:e,toggle:t,confirm:n,cancel:d}){return l(M,{condition:e,showTrue:E("div",{style:{display:"flex",gap:"1rem"},children:[l("button",{className:"orange",style:{fontSize:"1rem"},onClick:()=>{d(),t()},children:"Cancel"}),l("button",{className:"green",style:{fontSize:"1rem"},onClick:()=>{n(),t()},children:"Confirm"})]}),showFalse:l("button",{className:"green",style:{fontSize:"1rem"},onClick:t,children:"New Invite"})})}function nt({setName:e,setEmail:t}){return E("div",{style:{display:"grid",gridTemplateColumns:"1fr 1.5fr",gap:"1rem"},children:[l(H,{placeholder:"Name",onChange:e}),l(H,{placeholder:"Email",onChange:t})]})}function rt({currentUserID:e}){const[t,n]=re("users"),d=t&&Object.keys(t).filter(f=>f!==e);return E("div",{style:{display:"grid",gridTemplateColumns:"3fr auto 2fr",gap:"2rem"},children:[E("div",{style:{display:"grid",gap:"2rem",maxHeight:"85vh",height:"fit-content",overflowY:"scroll"},children:[l("div",{style:{fontSize:"1.5rem"},children:"All Users:"}),d&&d.map(f=>l(Ge,{user:t[f],functions:n},f))]}),l(U,{vertical:!0}),l(it,{})]})}function it(){const[e,t]=I.exports.useState();return I.exports.useEffect(()=>{D.service("api/invite").find().then(t)},[]),E("div",{style:{display:"grid",gap:"2rem",maxHeight:"85vh",height:"fit-content",overflowY:"scroll"},children:[l(et,{onConfirmInvite:t}),e&&e.map(n=>l(Xe,{invite:n,onDelete:t},n.key))]})}function ot(e,t){return{addHeat:()=>t(e._id,"heats",[...e.heats,{case1:"",case2:""}]),removeHeat:s=>t(e._id,"heats",e.heats.filter((c,u)=>u!==s)),editTimer:(s,c)=>{t(e._id,"timers",[...e.timers.map((u,g)=>g===c?Number(s):u)])}}}function st(e,t,n,d){const f=P(),{setOne:s,setOneField:c,removeOne:u}=n,g=t._id,y=()=>e?t.templateTitle||"":t.templateTitle||"Unnamed Template",w=r=>{c(g,"templateTitle",r)},p=()=>{D.service("api/templates").remove(g),f(".."),u(g)};return{getTitle:y,rename:w,onDelete:p,onSave:async()=>{const r=await D.service("api/templates").update(g,t);s(g,r),d(!1)},onCancel:async()=>{const r=await D.service("api/templates").get(g);!r.templateTitle&&!r.heats.length?(p(),d(!1)):(s(g,r),d(!1))}}}function at(e){return e[0].toUpperCase()+e.slice(1)}function pe(e,t){return`${t?"New ":""}${at(e)} School Template`}function ct({cases:e,selected:t,level:n,onSelect:d}){const[f,s]=I.exports.useState(!1),c=Object.keys(e).filter(u=>e[u].level===n);return E("div",{style:{position:"relative",width:"100%",boxSizing:"border-box",placeSelf:"center"},children:[l("button",{className:"blue",onClick:()=>s(!f),style:{width:"100%",textAlign:"start"},children:e[t]?e[t].title:"No Case Selected"}),f&&l("div",{style:{position:"absolute",top:"calc(100% + 0.5rem)",left:"0",display:"grid",width:"100%",alignSelf:"center",zIndex:2,borderRadius:"0.25rem",overflow:"hidden"},className:"light",children:c.map(u=>l("button",{onClick:()=>{d(u),s(!1)},className:"blue",style:{borderRadius:"0",border:"none",width:"100%",fontSize:"1rem"},children:e[u].title},u))})]})}function lt({editing:e,user:t,template:n,addHeat:d,removeHeat:f,setOneField:s}){const[c]=ye(t),[u,g]=I.exports.useState({});I.exports.useEffect(()=>{t.admin||D.service("api/cases").find({query:{isOfficial:!0,level:n.level}}).then(w=>g(G(w,"_id")))},[]);const y=t.admin?c:q(q({},c),u);return E("div",{className:"heats",style:{maxHeight:"70vh"},children:[l(ft,{onAdd:d,editing:e}),l("div",{style:{maxHeight:"70vh",overflowY:"auto",display:"flex",flexDirection:"column",gap:"2rem",paddingBottom:"4rem"},children:c&&n.heats&&n.heats.map((w,p)=>l(ut,{editing:e,template:n,index:p,cases:y,heat:w,heats:n.heats,onRemove:f,setOneField:s},p))})]})}function ut({editing:e,index:t,template:n,cases:d,heats:f,heat:s,onRemove:c,setOneField:u}){const{case1:g,case2:y}=s,{_id:w,level:p}=n,v=(a,r)=>m=>{const h=f;r?h.splice(a,1,R(q({},h[a]),{case1:m})):h.splice(a,1,R(q({},h[a]),{case2:m})),u(w,"heats",h)};return E("div",{className:"heat",children:[E("div",{className:"heat-header",children:[E("div",{style:{fontSize:"1.25rem",paddingLeft:"0.5rem"},children:["Heat ",t+1]}),e&&l("button",{className:"red",onClick:()=>c(t),style:{placeSelf:"end",fontSize:"0.8rem"},children:"Remove"})]}),E("div",{style:{display:"grid",width:"100%"},children:[l(ue,{editing:e,cases:d,caseID:g,level:p,onSelect:v(t,!0)}),l(ue,{editing:e,cases:d,caseID:y,level:p,onSelect:v(t,!1)})]})]})}function ue({editing:e,cases:t,caseID:n,level:d,onSelect:f}){return E("div",{className:"heat-item",children:[l("div",{style:{padding:"0.5rem"},children:"Round 1:"}),l(M,{condition:e,showTrue:l(ct,{cases:t,selected:n,onSelect:f,level:d}),showFalse:E("div",{style:{alignSelf:"center"},children:[" ",n&&t[n]?t[n].title:"No Case Selected"," "]})})]})}function ft({editing:e,onAdd:t}){return E("div",{className:"heat-header",children:[l("div",{style:{fontSize:"1.5rem",width:"fit-content"},children:"Heats"}),e&&l("button",{className:"green",style:{placeSelf:"end"},onClick:t,children:"Add Heat"})]})}const dt=["First Conference","Presentation","Second Conference","Commentary","Third Conference","Response","Judge's Questions"];function mt({editing:e,timers:t,onConfirm:n}){return E("div",{className:"timers",children:[l("div",{style:{fontSize:"1.5rem",width:"fit-content"},children:"Timers"}),l("div",{style:{display:"grid",gap:"0.5rem",borderTop:"solid 1px",borderBottom:"solid 1px",padding:"1rem 0rem "},children:t&&t.map((d,f)=>l(ht,{editing:e,time:d,index:f,label:dt[f],onConfirm:n},f*Math.random()))})]})}function ht({editing:e,time:t,index:n,label:d,onConfirm:f}){return E("div",{className:"timer-input",children:[E("div",{style:{placeSelf:"start"},children:[" ",d,": "]}),E("div",{style:{placeSelf:"end",borderBottom:e?void 0:"solid 0.25rem transparent",display:"grid",gap:"0.5rem",gridAutoFlow:"column"},children:[e?l(H,{style:{width:"2rem",textAlign:"right"},defaultValue:t.toString(),onConfirm:s=>f(s,n)}):l("div",{children:t}),"min"]})]})}function pt({templateID:e,events:t,onNewClick:n,isTemplateEditing:d,isEventEditing:f}){const s=P(),c=window.location.pathname.split("/"),u=c[c.length-1];return E("div",{className:"items",children:[l("button",{className:f?"grey":"blue",onClick:()=>{f?window.alert("Please save your changes to the event first."):s(`/events/${e}`)},style:{fontSize:"1.25rem",padding:"0.5rem 1rem",width:"100%",cursor:f?"not-allowed":"pointer"},children:"General Configuration"}),t&&Object.keys(t).map(g=>l(yt,{event:t[g],onClick:()=>{d?window.alert("Please save your changes to the template first."):s(`./${g}`)},disable:d||f&&u!==g},g)),l("button",{className:f?"grey":"green",onClick:f?void 0:n,style:{fontSize:"1.25rem",padding:"0.5rem 1rem",width:"100%",cursor:f?"not-allowed":"pointer"},children:"New Event"})]})}function yt({event:e,onClick:t,disable:n}){return l("button",{className:n?"grey":"blue",onClick:t,style:{fontSize:"1.25rem",padding:"0.5rem 1rem",width:"100%",cursor:n?"not-allowed":"pointer"},children:e.eventTitle||"Unnamed Event"})}function vt(e,t,n,d){const f=P(),{setOne:s,setOneField:c,removeOne:u}=n,g=t._id,y=()=>{D.service("api/events").remove(g),f(`/events/${t.templateID}`),u(g)};return{deleteEvent:y,saveEdits:async()=>{const m=await D.service("api/events").update(g,t);s(g,m),d(!1)},cancelEdits:async()=>{const m=await D.service("/api/events").get(g);!m.eventTitle&&!m.teams.length?(y(),d(!1)):(s(g,m),d(!1))},getTitle:()=>e?t.eventTitle||"":t.eventTitle||"Unnamed Template",setTitle:m=>{c(g,"eventTitle",m)},setPassword:m=>h=>{c(m,"password",h)}}}function gt({editing:e,eventID:t,events:n,setTitle:d,setPassword:f,toggleEditing:s,deleteEvent:c,saveEdits:u,cancelEdits:g,getTitle:y}){return E("div",{className:"page-title",children:[E("div",{style:{display:"grid",gap:"1rem",width:"100%"},children:[E("div",{style:{display:"flex",gap:"1rem",fontSize:"1.75rem"},children:["Name:",l($,{id:"event-title",editing:e,value:y(),fontSize:"1.75rem",onEdit:d,placeholder:"Name This Event"})]}),l(wt,{editing:e,eventID:t,events:n,setPassword:f})]}),l("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",width:"100%",placeSelf:"start",gap:"2rem"},children:l(ne,{editing:e,toggleEditing:s,onDelete:c,onSave:u,onCancel:g,extraText:"Event"})})]})}function wt({editing:e,eventID:t,events:n,setPassword:d}){return E("div",{style:{placeSelf:"start",display:"flex",alignItems:"flex-end",fontSize:"1rem",gap:"1rem"},children:[E("div",{style:{borderBottom:"solid 0.25rem transparent",display:"flex"},children:["Password:",l("div",{style:{opacity:.5,marginLeft:"0.5rem"},children:!e&&!n[t].password&&"Create A Password"})]}),l($,{placeholder:"enter password",editing:e,value:n[t].password,onEdit:d(t)})]})}function bt(e,t){return{addTeam:()=>t(e._id,"teams",[...e.teams,{teamName:"",present:!1}]),renameTeam:(s,c)=>t(e._id,"teams",e.teams.map((u,g)=>g===c?R(q({},u),{teamName:s}):u)),removeTeam:s=>{t(e._id,"teams",e.teams.filter((c,u)=>u!==s))}}}function xt({editing:e,teams:t,onAdd:n,onRename:d,onRemove:f}){return E("div",{className:"teams",children:[E("div",{className:"heat-header",children:[l("div",{style:{fontSize:"1.5rem",width:"fit-content"},children:"Teams"}),e&&l("button",{className:"green",onClick:n,style:{placeSelf:"end"},children:"Add Team"})]}),l("div",{children:t&&t.length>0&&l("div",{style:{display:"grid",gap:"1rem",borderTop:"solid 1px",borderBottom:"solid 1px",padding:"1rem 0rem ",maxHeight:"57.5vh",overflowY:"auto"},children:t&&t.map((s,c)=>l(Tt,{editing:e,team:s,onRename:u=>d(u,c),onRemove:()=>f(c)},s.teamName))})})]})}function Tt({editing:e,team:t,onRename:n,onRemove:d}){return E("div",{className:"team",children:[e?l(H,{style:{fontSize:"1rem",textOverflow:"ellipsis"},defaultValue:t.teamName,placeholder:"New Team",onConfirm:n}):l("div",{style:{width:"100%",borderBottom:"solid 0.25rem transparent",textOverflow:"ellipsis"},children:t.teamName}),e&&l("button",{className:"red",onClick:d,style:{fontSize:"0.8rem"},children:"Remove"})]})}function St({eventID:e}){const[t,n]=I.exports.useState(),[d,f]=I.exports.useState(!1),s=()=>{f(!0),D.service("api/scores").find({query:{eventID:e}}).then(u=>{f(!1),n(u)})};I.exports.useEffect(()=>{s()},[]);const c=u=>{let g=0;return Object.keys(u).forEach(y=>g+=u[y]),g};return E("div",{className:"teams",children:[E("div",{className:"flex-between",children:[l("div",{style:{fontSize:"1.5rem",width:"fit-content"},children:"Scores"}),l("button",{onClick:s,disabled:d,className:d?"orange":"green",children:"Check for Scores"})]}),l("div",{style:{display:"grid",gap:"1rem"},children:t&&t.map(u=>E("div",{style:{display:"grid",gap:"1rem",padding:"1rem"},className:"grey-flat",children:[E("div",{className:"flex-between",children:[l("div",{children:"Judge: "+u.judgeName}),l("div",{children:"Heat Number: "+u.heatNumber})]}),E("div",{className:"flex-between",children:[l("div",{children:"TeamA: "+u.teamA}),l("div",{children:"Total: "+c(u.scoreA)})]}),E("div",{className:"flex-between",children:[l("div",{children:"TeamB: "+u.teamB}),l("div",{children:"Total: "+c(u.scoreB)})]})]}))})]})}function Ct({eventState:e,editing:t,setEditing:n}){const{eventID:d}=Q(),[f,s]=e,c=f[d],u=vt(t,c,s,n),{addTeam:g,renameTeam:y,removeTeam:w}=bt(f[d],s.setOneField);return E("div",{style:{display:"grid",gridTemplateRows:"auto 1fr",gap:"2rem"},children:[l(gt,q({editing:t,eventID:d,events:f,toggleEditing:()=>n(!t)},u)),E("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"2rem"},children:[l(xt,{editing:t,teams:c.teams,onAdd:g,onRename:y,onRemove:w}),l(U,{vertical:!0}),l(St,{eventID:c._id})]})]})}function Et({user:e,templateState:t,editing:n,setEditing:d}){const f=P(),k=Q(),{templateID:s}=k,c=X(k,["templateID"]),[u,g]=t,[y,w]=I.exports.useState(!1),[p,v]=I.exports.useState(!1);function a(){const _=window.location.pathname;let b=0;for(let i=0;i<_.length;i++)_[i]==="/"&&b++;return b}I.exports.useEffect(()=>{v(a()>2)},[window.location.pathname]);const[r,m]=re("events",{query:{owner:e._id,templateID:s}}),h=u[s],C=async()=>{var b;const _=await D.service("/api/events").create(Re(s));m.setOne(_._id,_),f(`./${_._id}`),w(!0),(b=document.getElementById("event-title"))==null||b.focus(),w(!0)};return E("div",{className:"template",children:[h&&l(Nt,{editing:n,template:h,setEditing:d,templateFunctions:g,hideButtonsWhen:p}),l(U,{}),h&&r&&E("div",{style:{display:" grid",gridTemplateColumns:"3fr auto 1fr",gap:"1rem",paddingTop:"1rem"},children:[E(K,{children:[l(F,{path:"/*",element:l(kt,{editing:n,user:e,template:h,setOneField:g.setOneField})}),l(F,{path:"/:eventID",element:Object.keys(r).length>0&&l(Ct,{eventState:[r,m],editing:y,setEditing:w})})]}),l(U,{vertical:!0}),l(pt,{events:r,onNewClick:C,templateID:h._id,setEditing:w,isTemplateEditing:n,isEventEditing:y})]})]})}function Nt({editing:e,template:t,setEditing:n,templateFunctions:d,hideButtonsWhen:f}){const g=st(e,t,d,n),{getTitle:s,rename:c}=g,u=X(g,["getTitle","rename"]);return E("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l($,{editing:e,value:s(),onEdit:c,fontSize:"2rem",id:"template-title",style:{width:"50%"},placeholder:"Name This Template"}),E("div",{children:[" ",pe(t.level)," "]}),!f&&l(ne,R(q({editing:e,toggleEditing:()=>n(!e)},u),{extraText:"Template"}))]})}function kt({editing:e,user:t,template:n,setOneField:d}){const{addHeat:f,removeHeat:s,editTimer:c}=I.exports.useMemo(()=>ot(n,d),[n]);return E("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"1rem"},children:[l(lt,{editing:e,user:t,template:n,addHeat:f,removeHeat:s,setOneField:d}),l(U,{vertical:!0}),l(mt,{editing:e,timers:n.timers,onConfirm:c})]})}function _t({object:e,map:t,filter:n}){return n?l(ee,{children:Object.keys(e).filter(n).map(t)}):l(ee,{children:Object.keys(e).map(t)})}function Ot({user:e}){const[t,n]=re("templates",{query:{owner:e._id}}),[d,f]=I.exports.useState(!1);return E(K,{children:[l(F,{path:"/",element:t&&l(Lt,{templates:t,user:e,setOne:n.setOne,setEditing:f})}),l(F,{path:"/:templateID/*",element:t&&l(Et,{user:e,templateState:[t,n],editing:d,setEditing:f})})]})}function Lt({templates:e,user:t,setOne:n,setEditing:d}){const f=P(),s=t.admin?["junior","middle","senior","tertiary"]:t.permissions,c=u=>async()=>{var y;const g=await D.service("/api/templates").create(je(t._id,u));n(g._id,g),f(`./${g._id}`),d(!0),(y=document.getElementById("template-title"))==null||y.focus()};return l("div",{className:"templates",children:s&&s.map((u,g)=>E("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:"2rem",marginLeft:g===0?"undefined":"1rem"},children:[E("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[l("button",{className:"green",onClick:c(u),style:{width:"100%"},children:pe(u,!0)}),l(_t,{object:e,filter:y=>e[y].level===u,map:y=>l("button",{className:"blue",onClick:()=>f(`./${e[y]._id}`),style:{width:"100%",fontSize:"1.25rem"},children:e[y].templateTitle||"Unnamed Template"})})]}),g<3&&l(U,{vertical:!0})]}))})}function At({user:e,logout:t,dark:n,toggleDark:d}){return E(I.exports.Fragment,{children:[l(De,{logout:t,dark:n,toggleDark:d,user:e}),l("div",{style:{padding:"1rem"},children:E(K,{children:[l(F,{path:"/"}),l(F,{path:"/events/*",element:l(Ot,{user:e})}),l(F,{path:"/cases/*",element:l(Ve,{user:e})}),e.admin&&l(F,{path:"/users",element:l(rt,{currentUserID:e._id})})]})})]})}function It(){const e=de(void 0);return()=>{const[t,n]=fe(e);return I.exports.useEffect(()=>{D.reAuthenticate().then(({user:c})=>n(c)).catch(()=>n(!1))},[]),{user:t,login:async c=>{try{const u=await D.authenticate(q({strategy:"local"},c));n(u.user)}catch{n(!1),window.alert("Invalid Login Credentials")}},logout:async()=>{await D.logout(),n(!1)},createAccount:async(c,u)=>{try{const g=await D.service("api/users").create(R(q({},c),{inviteKey:u}));n(g)}catch(g){n(!1),window.alert(g.message)}}}}}function zt(e,t){const n=window.localStorage.getItem(t),[d,f]=I.exports.useState(n?JSON.parse(n):e);return[d,s=>{f(s),window.localStorage.setItem(t,JSON.stringify(s))}]}function qt(){const[e,t]=zt(!1,"ethics-olympiad-manager-dark");function n(){t(!e)}return[e,n]}const Dt=It(),ye=Ze("cases");function jt(){const{user:e,login:t,logout:n,createAccount:d}=Dt(),[f,s]=qt();return l("div",{className:`app ${f?"dark":"light"}`,children:l(ze,{user:e,isAuth:l(At,{user:e,logout:n,dark:f,toggleDark:s}),notAuth:l(Ie,{login:t,createAccount:d})})})}const D=Oe("https://ethicsolympiad.herokuapp.com/");Ce.render(l(Ee.StrictMode,{children:l(Ne,{children:l(jt,{})})}),document.getElementById("root"))});export default Rt();
